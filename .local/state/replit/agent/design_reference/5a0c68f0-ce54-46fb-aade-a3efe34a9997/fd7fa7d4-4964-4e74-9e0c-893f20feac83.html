<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoE Routing Agent - BFSI Analytics Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1976D2',
                        secondary: '#424242',
                        processing: '#4CAF50',
                        idle: '#757575',
                        surface: '#1E1E1E',
                        'surface-light': '#2C2C2C'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white font-inter">
    <!-- @COMPONENT: DisclaimerBanner -->
    <div class="bg-red-600 border-l-4 border-red-800 p-4 mb-6">
        <div class="flex items-center">
            <i class="fas fa-exclamation-triangle text-yellow-300 text-xl mr-3"></i>
            <div>
                <h4 class="text-lg font-bold">PROOF OF CONCEPT - TECHNOLOGY DEMONSTRATION ONLY</h4>
                <p class="text-red-100 text-sm mt-1">This system uses fictitious data and non-proprietary datasets for demonstration purposes. Not for production use.</p>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: DisclaimerBanner -->

    <div class="min-h-screen bg-gray-900 p-6">
        <!-- @COMPONENT: Header -->
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-primary mb-2">MoE Routing Agent Dashboard</h1>
                    <p class="text-gray-300">BFSI Mixture of Experts - Real-time Agent Monitoring & Analytics</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="bg-surface px-4 py-2 rounded-lg">
                        <div class="text-xs text-gray-400">System Status</div>
                        <div class="flex items-center">
                            <div class="w-2 h-2 bg-processing rounded-full mr-2 animate-pulse"></div>
                            <span class="text-processing font-medium">ACTIVE</span>
                        </div>
                    </div>
                    <div class="bg-surface px-4 py-2 rounded-lg">
                        <div class="text-xs text-gray-400">Active Requests</div>
                        <div class="text-xl font-bold" data-bind="activeRequests">12</div>
                    </div>
                </div>
            </div>
        </header>
        <!-- @END_COMPONENT: Header -->

        <!-- @COMPONENT: MainSchematic -->
        <div class="grid grid-cols-12 gap-6 mb-8">
            
            <!-- @COMPONENT: IncomingRequest [LEFT] -->
            <div class="col-span-3">
                <div class="bg-surface rounded-lg p-6 border border-gray-700">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-arrow-right text-primary mr-2"></i>
                        Incoming Request
                    </h3>
                    
                    <!-- Current Request Display -->
                    <div class="bg-surface-light rounded-lg p-4 mb-4">
                        <div class="text-xs text-gray-400 mb-2">ACTIVE REQUEST</div>
                        <div class="text-sm font-medium mb-2" data-mock="true">Loan Application #LA-2024-0157</div>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-gray-400">Priority:</span>
                            <span class="text-orange-400 font-medium">HIGH</span>
                        </div>
                        <div class="flex items-center justify-between text-xs mt-1">
                            <span class="text-gray-400">Type:</span>
                            <span class="text-blue-400 font-medium">Credit Assessment</span>
                        </div>
                    </div>

                    <!-- Request Queue -->
                    <div class="space-y-2">
                        <div class="text-xs text-gray-400 mb-2">REQUEST QUEUE</div>
                        <!-- @MAP: requestQueue.map(request => ( -->
                        <div class="bg-gray-800 rounded p-2 text-xs" data-mock="true">
                            <div class="font-medium">Insurance Claim #IC-2024-0891</div>
                            <div class="text-gray-400">Fraud Detection • MEDIUM</div>
                        </div>
                        <div class="bg-gray-800 rounded p-2 text-xs" data-mock="true">
                            <div class="font-medium">ESG Report #ESG-2024-0234</div>
                            <div class="text-gray-400">ESG Analysis • LOW</div>
                        </div>
                        <div class="bg-gray-800 rounded p-2 text-xs" data-mock="true">
                            <div class="font-medium">Credit Check #CC-2024-1456</div>
                            <div class="text-gray-400">Risk Assessment • HIGH</div>
                        </div>
                        <!-- @END_MAP )) -->
                    </div>

                    <!-- Request Metrics -->
                    <div class="mt-4 pt-4 border-t border-gray-700">
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div>
                                <div class="text-gray-400">Requests/Min</div>
                                <div class="text-lg font-bold" data-bind="requestsPerMin">8.5</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Avg Response</div>
                                <div class="text-lg font-bold" data-bind="avgResponse">2.3s</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: IncomingRequest -->

            <!-- @COMPONENT: MoERouter [CENTER] -->
            <div class="col-span-6">
                <div class="bg-surface rounded-lg p-6 border-2 border-primary">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-network-wired text-primary mr-2"></i>
                        MoE Routing Agent
                        <span class="ml-2 px-2 py-1 bg-processing text-black text-xs rounded font-bold">Phi-3 Mini (3.8B)</span>
                    </h3>

                    <!-- @COMPONENT: RealTimeDialog -->
                    <div class="bg-gray-800 rounded-lg p-4 mb-4 h-48 overflow-y-auto border-l-4 border-processing">
                        <div class="text-xs text-processing font-bold mb-2 flex items-center">
                            <div class="w-2 h-2 bg-processing rounded-full mr-2 animate-pulse"></div>
                            REAL-TIME ANALYSIS LOG
                        </div>
                        <div class="space-y-2 text-sm" data-implementation="Real-time log streaming component">
                            <div class="text-gray-300" data-mock="true">
                                <span class="text-blue-400">[14:23:15]</span> Processing loan application LA-2024-0157...
                            </div>
                            <div class="text-gray-300" data-mock="true">
                                <span class="text-blue-400">[14:23:16]</span> Analyzing request complexity: Credit + Fraud + ESG components detected
                            </div>
                            <div class="text-processing" data-mock="true">
                                <span class="text-blue-400">[14:23:17]</span> → Routing to Credit Check Agent (Load: 67%)
                            </div>
                            <div class="text-processing" data-mock="true">
                                <span class="text-blue-400">[14:23:18]</span> → Routing to Fraud Detection Agent (Load: 45%)
                            </div>
                            <div class="text-yellow-400" data-mock="true">
                                <span class="text-blue-400">[14:23:19]</span> ← Credit Score: 742 (Good) - Processing time: 1.2s
                            </div>
                            <div class="text-yellow-400" data-mock="true">
                                <span class="text-blue-400">[14:23:20]</span> ← Fraud Risk: Low (0.12) - Processing time: 1.8s
                            </div>
                            <div class="text-processing" data-mock="true">
                                <span class="text-blue-400">[14:23:21]</span> → Routing to ESG Agent (Load: 34%)
                            </div>
                            <div class="text-gray-300" data-mock="true">
                                <span class="text-blue-400">[14:23:22]</span> Synthesizing responses... Confidence: 94%
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: RealTimeDialog -->

                    <!-- Router Metadata -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-surface-light rounded p-4">
                            <h4 class="text-sm font-medium mb-3">Routing Parameters</h4>
                            <div class="space-y-2 text-xs">
                                <div class="flex justify-between">
                                    <span class="text-gray-400">Context Size:</span>
                                    <span data-bind="contextSize">128K tokens</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">Response Threshold:</span>
                                    <span data-bind="responseThreshold">5.0s</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">Load Balancing:</span>
                                    <span class="text-processing" data-bind="loadBalancing">ACTIVE</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-400">Routing Algorithm:</span>
                                    <span data-bind="routingAlgorithm">Weighted Round-Robin</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-surface-light rounded p-4">
                            <h4 class="text-sm font-medium mb-3">Decision Criteria Weights</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center text-xs">
                                    <span class="text-gray-400">Agent Load</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-700 rounded-full h-1 mr-2">
                                            <div class="bg-primary h-1 rounded-full" style="width: 40%"></div>
                                        </div>
                                        <span>40%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center text-xs">
                                    <span class="text-gray-400">Specialization</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-700 rounded-full h-1 mr-2">
                                            <div class="bg-primary h-1 rounded-full" style="width: 35%"></div>
                                        </div>
                                        <span>35%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center text-xs">
                                    <span class="text-gray-400">Response Time</span>
                                    <div class="flex items-center">
                                        <div class="w-16 bg-gray-700 rounded-full h-1 mr-2">
                                            <div class="bg-primary h-1 rounded-full" style="width: 25%"></div>
                                        </div>
                                        <span>25%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Load Metrics -->
                    <div class="mt-4 grid grid-cols-4 gap-3">
                        <div class="text-center">
                            <div class="text-xs text-gray-400">CPU Usage</div>
                            <div class="text-lg font-bold text-yellow-400" data-bind="routerCpu">67%</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-400">Memory</div>
                            <div class="text-lg font-bold text-processing" data-bind="routerMemory">4.2GB</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-400">Tokens/Min</div>
                            <div class="text-lg font-bold" data-bind="routerTokens">2.1K</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-gray-400">Queue Depth</div>
                            <div class="text-lg font-bold text-orange-400" data-bind="queueDepth">3</div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: MoERouter -->

            <!-- @COMPONENT: ExpertAgents [RIGHT] -->
            <div class="col-span-3 space-y-4">
                
                <!-- Credit Check Agent -->
                <div class="bg-surface rounded-lg p-4 border border-processing">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-medium flex items-center">
                            <i class="fas fa-credit-card text-blue-400 mr-2"></i>
                            Credit Check Agent
                        </h4>
                        <span class="px-2 py-1 bg-processing text-black text-xs rounded font-bold">TinyLlama 1.1B</span>
                    </div>
                    
                    <!-- Agent Status -->
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-processing rounded-full mr-2 animate-pulse"></div>
                        <span class="text-processing text-sm font-medium">PROCESSING</span>
                    </div>

                    <!-- Metrics -->
                    <div class="grid grid-cols-2 gap-3 text-xs mb-3">
                        <div>
                            <div class="text-gray-400">CPU Usage</div>
                            <div class="text-yellow-400 font-bold" data-bind="creditCpu">67%</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Memory</div>
                            <div class="text-processing font-bold" data-bind="creditMemory">2.8GB</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Tokens/Min</div>
                            <div class="font-bold" data-bind="creditTokens">890</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Queue</div>
                            <div class="text-orange-400 font-bold" data-bind="creditQueue">2</div>
                        </div>
                    </div>

                    <!-- Instance Scaling -->
                    <div class="bg-surface-light rounded p-2">
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-gray-400">Instances:</span>
                            <div class="flex space-x-1">
                                <div class="w-4 h-4 bg-processing rounded" data-implementation="Instance visualization"></div>
                                <div class="w-4 h-4 bg-processing rounded opacity-75"></div>
                                <div class="w-4 h-4 bg-gray-600 rounded border-2 border-processing animate-pulse" title="Spawning new instance"></div>
                            </div>
                        </div>
                        <div class="text-xs text-processing mt-1">Load Threshold: 70% - Scaling Up</div>
                    </div>
                </div>

                <!-- Fraud Detection Agent -->
                <div class="bg-surface rounded-lg p-4 border border-idle">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-medium flex items-center">
                            <i class="fas fa-shield-alt text-red-400 mr-2"></i>
                            Fraud Detection Agent
                        </h4>
                        <span class="px-2 py-1 bg-idle text-white text-xs rounded font-bold">TinyLlama 1.1B</span>
                    </div>
                    
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-idle rounded-full mr-2"></div>
                        <span class="text-idle text-sm font-medium">IDLE</span>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-xs mb-3">
                        <div>
                            <div class="text-gray-400">CPU Usage</div>
                            <div class="text-processing font-bold" data-bind="fraudCpu">45%</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Memory</div>
                            <div class="text-processing font-bold" data-bind="fraudMemory">2.1GB</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Tokens/Min</div>
                            <div class="font-bold" data-bind="fraudTokens">670</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Queue</div>
                            <div class="text-processing font-bold" data-bind="fraudQueue">1</div>
                        </div>
                    </div>

                    <div class="bg-surface-light rounded p-2">
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-gray-400">Instances:</span>
                            <div class="flex space-x-1">
                                <div class="w-4 h-4 bg-processing rounded"></div>
                                <div class="w-4 h-4 bg-gray-600 rounded"></div>
                                <div class="w-4 h-4 bg-gray-600 rounded"></div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">Load Threshold: 80% - Optimal</div>
                    </div>
                </div>

                <!-- ESG Analysis Agent -->
                <div class="bg-surface rounded-lg p-4 border border-processing">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-medium flex items-center">
                            <i class="fas fa-leaf text-green-400 mr-2"></i>
                            ESG Analysis Agent
                        </h4>
                        <span class="px-2 py-1 bg-processing text-black text-xs rounded font-bold">TinyLlama 1.1B</span>
                    </div>
                    
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-processing rounded-full mr-2 animate-pulse"></div>
                        <span class="text-processing text-sm font-medium">PROCESSING</span>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-xs mb-3">
                        <div>
                            <div class="text-gray-400">CPU Usage</div>
                            <div class="text-processing font-bold" data-bind="esgCpu">34%</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Memory</div>
                            <div class="text-processing font-bold" data-bind="esgMemory">2.3GB</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Tokens/Min</div>
                            <div class="font-bold" data-bind="esgTokens">540</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Queue</div>
                            <div class="text-processing font-bold" data-bind="esgQueue">1</div>
                        </div>
                    </div>

                    <div class="bg-surface-light rounded p-2">
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-gray-400">Instances:</span>
                            <div class="flex space-x-1">
                                <div class="w-4 h-4 bg-processing rounded"></div>
                                <div class="w-4 h-4 bg-gray-600 rounded"></div>
                                <div class="w-4 h-4 bg-gray-600 rounded"></div>
                            </div>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">Load Threshold: 60% - Healthy</div>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: ExpertAgents -->
        </div>
        <!-- @END_COMPONENT: MainSchematic -->

        <!-- @COMPONENT: SystemOverview -->
        <div class="grid grid-cols-3 gap-6 mb-8">
            <!-- Performance Analytics -->
            <div class="bg-surface rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-chart-line text-primary mr-2"></i>
                    Performance Analytics
                </h3>
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Overall Throughput</span>
                        <span class="text-processing font-bold" data-bind="throughput">847 req/hr</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Avg Response Time</span>
                        <span class="text-blue-400 font-bold" data-bind="avgResponseTime">2.1s</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Success Rate</span>
                        <span class="text-processing font-bold" data-bind="successRate">99.2%</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">Error Rate</span>
                        <span class="text-orange-400 font-bold" data-bind="errorRate">0.8%</span>
                    </div>
                </div>
            </div>

            <!-- Model Information -->
            <div class="bg-surface rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-microchip text-primary mr-2"></i>
                    Model Specifications
                </h3>
                <div class="space-y-3">
                    <div>
                        <div class="text-sm text-gray-400">Router Model</div>
                        <div class="font-medium">Phi-3 Mini (3.8B parameters)</div>
                        <div class="text-xs text-gray-500">Context: 128K tokens</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">Expert Models</div>
                        <div class="font-medium">TinyLlama (1.1B parameters)</div>
                        <div class="text-xs text-gray-500">Quantized: 4-bit GGUF</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">Total Parameters</div>
                        <div class="font-medium text-processing">7.1B (Router + 3 Experts)</div>
                    </div>
                </div>
            </div>

            <!-- Real-time Alerts -->
            <div class="bg-surface rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-bell text-primary mr-2"></i>
                    System Alerts
                </h3>
                <div class="space-y-3" data-implementation="Real-time alert system">
                    <div class="bg-yellow-900 border-l-4 border-yellow-400 p-3 rounded">
                        <div class="flex items-center">
                            <i class="fas fa-exclamation-triangle text-yellow-400 mr-2"></i>
                            <div>
                                <div class="text-sm font-medium">High Load Detected</div>
                                <div class="text-xs text-gray-300" data-mock="true">Credit Agent scaling up - 3rd instance spawning</div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-green-900 border-l-4 border-processing p-3 rounded">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-processing mr-2"></i>
                            <div>
                                <div class="text-sm font-medium">Auto-scaling Success</div>
                                <div class="text-xs text-gray-300" data-mock="true">Load balanced across 2 instances</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: SystemOverview -->

        <!-- @COMPONENT: DetailedLogs -->
        <div class="bg-surface rounded-lg p-6">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fas fa-file-alt text-primary mr-2"></i>
                Detailed System Logs
                <button class="ml-auto text-sm bg-primary px-3 py-1 rounded hover:bg-blue-600 transition-colors" data-event="click:exportLogs">
                    Export Logs
                </button>
            </h3>
            <div class="bg-gray-800 rounded-lg p-4 max-h-64 overflow-y-auto font-mono text-sm">
                <div class="space-y-1" data-implementation="Scrollable log viewer with real-time updates">
                    <div class="text-gray-400" data-mock="true">[2024-01-15 14:23:10] System initialized - MoE Router online</div>
                    <div class="text-blue-400" data-mock="true">[2024-01-15 14:23:12] Expert agents deployed: Credit(1), Fraud(1), ESG(1)</div>
                    <div class="text-gray-400" data-mock="true">[2024-01-15 14:23:15] Request received: LA-2024-0157 (Priority: HIGH)</div>
                    <div class="text-processing" data-mock="true">[2024-01-15 14:23:16] Routing decision: Credit(67% load) + Fraud(45% load)</div>
                    <div class="text-yellow-400" data-mock="true">[2024-01-15 14:23:18] Credit Agent response: Score=742, Risk=Low, Time=1.2s</div>
                    <div class="text-yellow-400" data-mock="true">[2024-01-15 14:23:19] Fraud Agent response: Risk=0.12, Confidence=94%, Time=1.8s</div>
                    <div class="text-orange-400" data-mock="true">[2024-01-15 14:23:20] Load threshold exceeded: Credit Agent scaling up</div>
                    <div class="text-processing" data-mock="true">[2024-01-15 14:23:21] New instance spawned: Credit Agent #3</div>
                    <div class="text-blue-400" data-mock="true">[2024-01-15 14:23:22] Load rebalanced: Credit load reduced to 43%</div>
                    <div class="text-gray-400" data-mock="true">[2024-01-15 14:23:24] Request LA-2024-0157 completed: APPROVED (Confidence: 94%)</div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: DetailedLogs -->
    </div>

    <script>
        // TODO: Implement real-time data updates, WebSocket connections, and API integrations
        (function() {
            // Simulated real-time updates for demo purposes
            function updateMetrics() {
                // TODO: Replace with actual API calls
                // This would connect to the actual MoE system
                console.log('Updating metrics...');
            }

            function updateLogs() {
                // TODO: Implement real-time log streaming
                console.log('Streaming logs...');
            }

            function handleScaling() {
                // TODO: Implement actual scaling logic
                console.log('Handling auto-scaling...');
            }

            // Initialize dashboard
            setInterval(updateMetrics, 2000);
            setInterval(updateLogs, 1000);
            
            console.log('MoE Dashboard initialized');
        })();
    </script>
</body>
</html>